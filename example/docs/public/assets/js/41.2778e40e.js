(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{438:function(e,t,n){"use strict";n.r(t);var r=n(3),a=Object(r.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("ul",[n("li",[n("p",[e._v("1、"),n("strong",[e._v("配置信息")]),n("br")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("spring.jpa.properties.hibernate.hbm2ddl.auto=upadte # 详细看下面\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\ncreate：每次运行程序时，都会重新创建表，故而数据会丢失\ncreate-drop：每次运行程序时会先创建表结构，然后待程序结束时清空表\nupadte：每次运行程序，没有表时会创建表，如果对象发生改变会更新表结构，原有数据不会清空，只会更新（推荐使用）\nvalidate：运行程序会校验数据与数据库的字段类型是否相同，字段不同会报错\nnone: 禁用DDL处理\n")])])])]),e._v(" "),n("li",[n("p",[e._v("2、"),n("strong",[e._v("entity类")]),n("br")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v('@Entity  \n//@Entity(name="EntityName") 必须，用来标注一个数据库对应的实体，数据库中创建的表名默认和类名一致。\n// 其中，name 为可选，对应数据库中一个表，使用此注解标记 Pojo 是一个 JPA 实体。\npublic class User  {\n    @Id    //@Id 定义了映射到数据库表的主键的属性\n    //@GeneratedValue(strategy=GenerationType.AUTO，generator="") 可选\n    //strategy: 表示主键生成策略，有 AUTO、INDENTITY(id自增长)、SEQUENCE 和 TABLE 4 种\n    //generator: 表示主键生成器的名称。             \n    @GeneratedValue\n    private Long id;\n    // nullable 是否允许为 null，默认为 true\n    // unique: 表示该字段是否是唯一标识，默认为 false\n    //@Transient 表示该属性并非一个到数据库表的字段的映射 ORM 框架将忽略该属性\n    @Column(nullable = false, unique = true)\n    private String userName;\n    @Column(nullable = false)\n    private String passWord;\n    @Column(nullable = false, unique = true)\n    private String email;\n    @Column(nullable = true, unique = true)\n    private String nickName;\n    @Column(nullable = false)\n    private String regTime; \n    // get  set\n    }    \n')])])])]),e._v(" "),n("li",[n("p",[e._v("3、"),n("strong",[e._v("UserRepository接口类")]),n("br")])])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("public interface UserRepository extends JpaRepository<User, Long> {\n        \n }\n")])])]),n("ul",[n("li",[e._v("4、"),n("strong",[e._v("JpaRepository提供默认方法")]),n("br")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v('@Test\n  public void testBaseQuery() {\n   \tDate date = new Date();\n   \tDateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG);\n   \tString formattedDate = dateFormat.format(date);\n   \tUser user=new User("ff", "ff123456","ff@126.com", "ff",  formattedDate);\n   \tuserRepository.findAll();\n   \tuserRepository.findById(3L);\n   \tuserRepository.save(user);\n   \tuser.setId(2L);\n   \tuserRepository.delete(user);\n   \tuserRepository.count();\n   \tuserRepository.existsById(3L);\n   \t}\n')])])]),n("ul",[n("li",[e._v("5、"),n("strong",[e._v("分页查询")]),n("br")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v('int page=1,size=5;\nSort sort = new Sort(Sort.Direction.DESC, "id");\nPageable pageable = PageRequest.of(page, size, sort);\nuserRepository.findALL(pageable);      \n')])])]),n("ul",[n("li",[e._v("6、"),n("strong",[e._v("自定义SQL查询")]),n("br")])]),e._v(" "),n("p",[e._v("    @Query来指定hql语句"),n("br")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v('@Query("select u from User u where u.email = ?1")\nUser findByEmail(String email);  // 返回实体类\nList findByEmail2(String email); // 以list返回\n')])])]),n("p",[e._v("    如涉及到删除和修改在需要加上@Modifying.也可以根据需要添加 @Transactional对事物的支持，查询超时的设置等。"),n("br")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v('    @Transactional(timeout = 10)\n    @Modifying\n    @Query("update User set userName = ?1 where id = ?2")\n    int modifyById(String  userName, Long id);\n')])])]),n("ul",[n("li",[e._v("7、"),n("strong",[e._v("多表查询")]),n("br")])]),e._v(" "),n("p",[e._v("     本人授权"),n("a",{attrs:{href:"http://rightknights.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("维权骑士"),n("OutboundLink")],1),e._v("对我发布文章的版权行为进行追究与维权。未经本人许可，不可擅自转载或用于其他商业用途。")])])}),[],!1,null,null,null);t.default=a.exports}}]);